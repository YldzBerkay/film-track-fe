@if (isOpen) {
<div class="dialog-overlay" (click)="onClose()">
    <div class="dialog-content" (click)="$event.stopPropagation()">
        <button class="close-btn" (click)="onClose()">
            <span class="material-symbols-outlined">close</span>
        </button>

        <div class="featured-star">
            <span class="material-symbols-outlined star-icon">star</span>
            <span class="star-rating">{{ (hoverRating() || selectedRating()) || '?' }}</span>
        </div>

        <div class="dialog-body">
            <div class="rate-this-label">RATE THIS</div>
            <h2 class="media-title">{{ title }}</h2>

            <div class="rating-stars interactive">
                @for (star of [1,2,3,4,5,6,7,8,9,10]; track star) {
                <span class="material-symbols-outlined"
                    [class.filled]="(selectedRating() || 0) >= star && hoverRating() === 0"
                    [class.hovered]="hoverRating() > 0 && hoverRating() >= star" [class.decrease]="isDecreaseZone(star)"
                    [class.increase]="isIncreaseZone(star)" (mouseenter)="hoverRating.set(star)"
                    (mouseleave)="hoverRating.set(0)" (click)="onRate(star)">
                    {{ getStarIcon(star) }}
                </span>
                }
            </div>

            <textarea #reviewInput class="review-input" placeholder="Write a review (optional)..." rows="3"
                (input)="onReviewInput(reviewInput.value)"></textarea>

            <button class="btn-rate" [disabled]="selectedRating() === 0" (click)="onSave()">Rate</button>
        </div>
    </div>
</div>
}