<div class="profile-hero">
    <!-- Banner -->
    <div class="hero-banner" [style.background-image]="user().banner ? 'url(' + user().banner + ')' : 'none'"
        [class.hero-banner--editable]="isOwnProfile()" (click)="isOwnProfile() && bannerInput.click()">

        @if (isOwnProfile()) {
        <div class="banner-edit-overlay">
            <div class="overlay-content">
                @if (isBannerLoading()) {
                <div class="spinner-small"></div>
                } @else {
                <span class="material-symbols-outlined">photo_camera</span>
                <span>{{ 'profile.changeBanner' | translate }}</span>
                }
            </div>
        </div>
        }
        <input type="file" #bannerInput (change)="handleBannerUpload($event)" accept="image/*" hidden>
    </div>

    <!-- Content -->
    <div class="hero-content">
        <div class="profile-header">
            <!-- Avatar Section -->
            <div class="profile-avatar-section">
                <div class="profile-avatar-large">
                    @if (user().avatar) {
                    <img [src]="user().avatar" alt="Profile Avatar" class="avatar-img-large">
                    } @else {
                    <div class="avatar-image"></div>
                    }
                    @if (isOwnProfile()) {
                    <button class="edit-avatar-btn" (click)="onEdit.emit()">
                        <span class="material-symbols-outlined">edit</span>
                    </button>
                    }
                </div>
            </div>

            <!-- Info Section -->
            <div class="profile-info">
                <div class="profile-title-section">
                    <div>
                        <h1 class="profile-username">{{ user().name || user().username }}</h1>
                        <p class="profile-bio">@{{ user().username }}</p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="profile-buttons">
                        @if (isOwnProfile()) {
                        <button class="edit-profile-btn" (click)="onEdit.emit()">
                            <span class="material-symbols-outlined">edit</span>
                            <span>{{ 'profile.editProfile' | translate }}</span>
                        </button>
                        <button class="share-profile-btn" (click)="onShare.emit()">
                            <span class="material-symbols-outlined">share</span>
                            <span>{{ 'profile.share' | translate }}</span>
                        </button>
                        <button class="report-btn" (click)="onReport.emit()">
                            <span class="material-symbols-outlined">analytics</span>
                            <span>{{ 'profile.report' | translate }}</span>
                        </button>
                        } @else {
                        @if (isFollowing()) {
                        <button class="follow-btn following" (click)="onUnfollow.emit()" [disabled]="isFollowLoading()">
                            <span class="material-symbols-outlined">check</span>
                            <span>{{ 'profile.following' | translate }}</span>
                        </button>
                        } @else {
                        <button class="follow-btn" (click)="onFollow.emit()" [disabled]="isFollowLoading()">
                            <span class="material-symbols-outlined">person_add</span>
                            <span>{{ 'profile.follow' | translate }}</span>
                        </button>
                        }
                        <button class="compare-mood-btn" (click)="onCompareMood.emit()">
                            <span class="material-symbols-outlined">compare</span>
                            <span>{{ 'profile.compareMood' | translate }}</span>
                        </button>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>